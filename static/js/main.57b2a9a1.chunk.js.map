{"version":3,"sources":["components/Selector.jsx","components/Spinner.jsx","components/Results.jsx","components/Header.jsx","components/Footer.jsx","components/DataTable/TableColumns.js","utils/isSubSequence.js","components/DataTable/BaseTable.jsx","components/DataTable/index.jsx","utils/fetchStates.js","utils/fetchDistricts.js","utils/fetchSlots.js","constants.js","utils/url.js","App.js","index.js"],"names":["Selector","values","selectedValue","onSelect","classes","prefix","FormControl","variant","className","formControl","InputLabel","id","Select","labelId","value","onChange","label","autoWidth","map","name","MenuItem","Spinner","CircularProgress","Results","capacity","isLoading","useState","isOpen","setIsOpen","style","marginBottom","textAlign","align","userSelect","onClick","navigator","clipboard","writeText","window","location","href","then","alert","cursor","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","message","action","IconButton","size","aria-label","color","fontSize","Header","Footer","bottom","marginTop","target","rel","baseFilterOptions","filter","sort","filterType","multiFilterOptions","columns","options","sortThirdClickReset","display","isSubSequence","small","big","toLowerCase","split","length","isMatched","i","innerIsMatched","j","startsWith","baseOptions","download","print","viewColumns","selectableRows","responsive","rowsPerPage","rowsPerPageOptions","customSearch","query","curr","BaseTable","data","title","DataTable","slots","fetchStates","a","fetch","res","json","states","fetchDistricts","districts","now","dayjs","fetchSlots","district","age","date","format","URL","centers","center","sessions","session","block","block_name","fee","fee_type","pincode","available_capacity","min_age","min_age_limit","vaccine","flattenDeep","s","b","parseQueryString","obj","state","slice","forEach","trim","k","v","useStyles","makeStyles","theme","margin","spacing","minWidth","selectEmpty","root","flexGrow","marginLeft","marginRight","withRouter","isInitiallyLoading","setIsInitiallyLoading","isDataLoading","setIsDataLoading","setCapacity","tableData","setTableData","setStates","selectedState","setSelectedState","setDistricts","selectedDistrict","setSelectedDistrict","setAge","history","useHistory","search","useLocation","useEffect","state_id","state_name","getStates","URLUtils","district_id","district_name","getDistricts","reduce","ac","getCountOfSlots","getChangeHandler","key","e","replace","toString","url","Object","entries","join","push","Grid","container","item","xs","md","TextField","width","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.57b2a9a1.chunk.js","sourcesContent":["import InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\n\nconst Selector = ({ values, selectedValue, onSelect, classes, prefix }) => {\n  return (\n    <FormControl variant=\"outlined\" className={classes.formControl}>\n      <InputLabel id={`${prefix}-input-label`} className=\"input-label\">\n        {prefix}\n      </InputLabel>\n      <Select\n        labelId={`${prefix}-input-label`}\n        id={`${prefix}-input-select`}\n        value={selectedValue}\n        onChange={onSelect}\n        label={prefix}\n        autoWidth\n      >\n        {values.map(({ id, name }) => (\n          <MenuItem key={`prefix-${id}`} value={id}>\n            {name}\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  );\n};\n\nexport default Selector;\n","import CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst Spinner = () => (\n  <div className=\"flex justify-center\">\n    <CircularProgress />\n  </div>\n);\n\nexport default Spinner;\n","import { useState } from \"react\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Spinner from \"./Spinner\";\n\nconst Results = ({ capacity, isLoading }) => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const copyURL = () => {\n    navigator.clipboard.writeText(window.location.href).then(\n      () => setIsOpen(true),\n      () => alert(\"error copying\")\n    );\n  };\n\n  return (\n    <>\n      {isLoading ? (\n        <Spinner />\n      ) : (\n        <div\n          className=\"flex flex-column align-center\"\n          style={{ marginBottom: \"1rem\", textAlign: \"center\" }}\n        >\n          <h1 align=\"center\">\n            There {capacity === 1 ? \"is\" : \"are\"} {capacity}{\" \"}\n            {capacity === 1 ? \"slot\" : \"slots\"} in the next 7 days!{\" \"}\n            {capacity === 0 ? \"😔\" : \"🚀\"}\n          </h1>\n          <span style={{ userSelect: \"none\" }}>\n            Want to check back again later?{\" \"}\n            <u onClick={copyURL} style={{ cursor: \"pointer\" }}>\n              Copy the URL!\n            </u>\n          </span>\n        </div>\n      )}\n      <Snackbar\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"left\",\n        }}\n        open={isOpen}\n        autoHideDuration={2000}\n        onClose={() => setIsOpen(false)}\n        message=\"Copied to clipboard\"\n        action={\n          <IconButton\n            size=\"small\"\n            aria-label=\"close\"\n            color=\"inherit\"\n            onClick={() => setIsOpen(false)}\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        }\n      />\n    </>\n  );\n};\n\nexport default Results;\n","const Header = () => (\n  <>\n    <h1 align=\"center\">Is a (vaccination) slot available for me?</h1>\n    <h3 align=\"center\">For people who are too lazy to login</h3>\n  </>\n);\n\nexport default Header;\n","const Footer = () => {\n  return (\n    <footer\n      style={{\n        bottom: \"25px\",\n        fontSize: \"1.2em\",\n        color: \"grey\",\n        textAlign: \"center\",\n        marginTop: \"1.5rem\",\n      }}\n    >\n      <div className=\"container\">\n        By{\" \"}\n        <a href=\"https://yashshah1.github.io\" target=\"_blank\" rel=\"noreferrer\">\n          Yash Shah\n        </a>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","const baseFilterOptions = {\n  filter: true,\n  sort: false,\n  filterType: \"dropdown\",\n};\nconst multiFilterOptions = {\n  ...baseFilterOptions,\n  filterType: \"multiselect\",\n};\nconst columns = [\n  {\n    name: \"name\",\n    label: \"Name\",\n    options: {\n      filter: false,\n      sort: true,\n      sortThirdClickReset: true,\n    },\n  },\n  {\n    name: \"date\",\n    label: \"Date\",\n    options: {\n      ...multiFilterOptions,\n      sort: true,\n    },\n  },\n  {\n    name: \"capacity\",\n    label: \"Capacity\",\n    options: {\n      filter: false,\n      sort: true,\n    },\n  },\n  {\n    name: \"pincode\",\n    label: \"Pin Code\",\n    options: multiFilterOptions,\n  },\n  {\n    name: \"vaccine\",\n    label: \"Vaccine\",\n    options: baseFilterOptions,\n  },\n  {\n    name: \"block\",\n    options: {\n      display: false,\n      filter: true,\n      filterType: \"multiselect\",\n    },\n  },\n];\n\nexport default columns;\n","const isSubSequence = (small, big) => {\n  small = small.toLowerCase().split(\" \");\n  big = big.toLowerCase().split(\" \");\n\n  if (small.length > big.length) return false;\n\n  let isMatched = true;\n\n  for (let i = 0; i < small.length; i++) {\n    let innerIsMatched = false;\n    for (let j = i; j < big.length; j++) {\n      if (big[j].startsWith(small[i])) {\n        innerIsMatched = true;\n        break;\n      }\n    }\n    if (!innerIsMatched) {\n      isMatched = false;\n      break;\n    }\n  }\n  return isMatched;\n};\n\nexport default isSubSequence;\n","import MUIDataTable from \"mui-datatables\";\nimport Spinner from \"../Spinner\";\n\nimport isSubSequence from \"../../utils/isSubSequence\";\n\nconst baseOptions = {\n  download: false,\n  print: false,\n  viewColumns: false,\n  selectableRows: \"none\",\n  responsive: \"standard\",\n  rowsPerPage: 10,\n  rowsPerPageOptions: [],\n  customSearch: (query, curr) => isSubSequence(query, curr[0]),\n};\nconst BaseTable = ({ columns, data, options = {}, isLoading }) => {\n  options = { ...options, ...baseOptions };\n  return isLoading ? (\n    <Spinner />\n  ) : (\n    <MUIDataTable\n      title=\"Available Slots\"\n      columns={columns}\n      options={options}\n      data={data}\n    />\n  );\n};\n\nexport default BaseTable;\n","import columns from \"./TableColumns\";\nimport BaseTable from \"./BaseTable\";\n\nconst DataTable = ({ slots, isLoading }) => {\n  return <BaseTable columns={columns} data={slots} isLoading={isLoading} />;\n};\n\nexport default DataTable;\n","const fetchStates = async () => {\n  return fetch(\"https://cdn-api.co-vin.in/api/v2/admin/location/states\")\n    .then((res) => res.json())\n    .then((res) => res.states);\n};\n\nexport default fetchStates;\n","const fetchDistricts = async (id) => {\n  return fetch(\n    `https://cdn-api.co-vin.in/api/v2/admin/location/districts/${id}`\n  )\n    .then((res) => res.json())\n    .then((res) => res.districts);\n};\n\nexport default fetchDistricts;\n","import dayjs from \"dayjs\";\nimport flattenDeep from \"lodash.flattendeep\";\nimport { URLForSlots } from \"../constants\";\n\nconst now = dayjs();\n\nexport const fetchSlots = async (district, age) => {\n  if (+age < 18) return [];\n  const date = now.format(\"DD-MM-YYYY\");\n  const URL = `${URLForSlots}district_id=${district}&date=${date}`;\n  return fetch(URL)\n    .then((res) => res.json())\n    .then((res) => res.centers)\n    .then((centers) => {\n      return centers.map((center) => {\n        return center.sessions.map((session) => ({\n          block: center.block_name,\n          fee: center.fee_type,\n          name: center.name,\n          pincode: center.pincode,\n          capacity: session.available_capacity,\n          min_age: session.min_age_limit,\n          vaccine: session.vaccine,\n          date: session.date,\n        }));\n      });\n    })\n    .then((sessions) => flattenDeep(sessions))\n    .then((sessions) =>\n      sessions\n        .filter((s) => s.capacity > 0 && s.min_age <= +age)\n        .map((s) => ({\n          ...s,\n          vaccine: s.vaccine || \"N/A\",\n        }))\n    )\n    .then((sessions) => sessions.sort((a, b) => b.capacity - a.capacity));\n};\n\nexport const getCountOfSlots = (slots) => {\n  return slots.reduce((ac, v) => ac + v.capacity, 0);\n};\n","export const URLForSlots =\n  \"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?\";\n","export const generateQueryString = (data) => {\n  return Object.entries(data)\n    .map(([k, v]) => (v.trim().length > 0 ? `${k}=${v}` : \"\"))\n    .join(\"&\");\n};\n\nexport const parseQueryString = (s) => {\n  const obj = {};\n  if (s.length <= 1) {\n    return { state: \"21\", district: \"363\", age: \"21\" };\n  }\n\n  const queryStringParams = s.slice(1).split(\"&\");\n  queryStringParams.forEach((s) => {\n    if (s.trim().length === 0) return;\n    const [k, v] = s.split(\"=\");\n    if (v.trim().length > 0) obj[k] = v;\n  });\n\n  return obj;\n};\n","import { useState, useEffect } from \"react\";\nimport { withRouter, useLocation, useHistory } from \"react-router-dom\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport Selector from \"./components/Selector\";\nimport Results from \"./components/Results\";\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\nimport Spinner from \"./components/Spinner\";\nimport DataTable from \"./components/DataTable\";\n\nimport fetchStates from \"./utils/fetchStates\";\nimport fetchDistricts from \"./utils/fetchDistricts\";\nimport { fetchSlots, getCountOfSlots } from \"./utils/fetchSlots\";\nimport * as URLUtils from \"./utils/url\";\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  root: {\n    flexGrow: 1,\n    marginLeft: \"1rem\",\n    marginRight: \"1rem\",\n  },\n}));\n\nfunction App() {\n  const [isInitiallyLoading, setIsInitiallyLoading] = useState(true);\n  const [isDataLoading, setIsDataLoading] = useState(true);\n  const [capacity, setCapacity] = useState(0);\n  const [tableData, setTableData] = useState([]);\n  const [states, setStates] = useState([]);\n  const [selectedState, setSelectedState] = useState(\"\");\n  const [districts, setDistricts] = useState([]);\n  const [selectedDistrict, setSelectedDistrict] = useState(\"\");\n  const [age, setAge] = useState(\"\");\n\n  const classes = useStyles();\n  const history = useHistory();\n  const { search } = useLocation();\n\n  useEffect(() => {\n    const getStates = async () => {\n      const states = await fetchStates();\n      setStates(\n        states.map(({ state_id, state_name }) => ({\n          id: state_id,\n          name: state_name,\n        }))\n      );\n      setIsInitiallyLoading(false);\n    };\n    getStates();\n  }, []);\n\n  useEffect(() => {\n    const { state, district, age } = URLUtils.parseQueryString(search);\n    if (state) setSelectedState(state);\n    if (district) setSelectedDistrict(district);\n    setAge(age ? age : \"\");\n  }, [search]);\n\n  useEffect(() => {\n    setIsInitiallyLoading(true);\n    const getDistricts = async () => {\n      const districts = await fetchDistricts(selectedState);\n      setDistricts(\n        districts.map(({ district_id, district_name }) => ({\n          id: district_id,\n          name: district_name,\n        }))\n      );\n      setIsInitiallyLoading(false);\n    };\n    getDistricts();\n  }, [selectedState]);\n\n  useEffect(() => {\n    if (!(selectedDistrict && age)) return;\n\n    setIsDataLoading(true);\n    fetchSlots(selectedDistrict, age).then((slots) => {\n      setTableData(slots);\n      setCapacity(getCountOfSlots(slots));\n      setIsDataLoading(false);\n    });\n  }, [selectedDistrict, age]);\n\n  const getChangeHandler = (key) => (e) => {\n    const obj = URLUtils.parseQueryString(search);\n    let value = e.target.value;\n    if (key === \"age\") value = value.replace(/\\D/g, \"\");\n    obj[key] = value.toString();\n    const url = URLUtils.generateQueryString(obj);\n    history.push(`?${url}`);\n  };\n\n  return (\n    <>\n      <div className={classes.root}>\n        <Header />\n        <Grid container spacing={2}>\n          <Grid item xs={12} md={6}>\n            <div className=\"flex flex-column\">\n              <br />\n              {isInitiallyLoading ? (\n                <Spinner />\n              ) : (\n                <div className=\"flex justify-center align-center flex-wrap gap-1\">\n                  <Selector\n                    values={states}\n                    selectedValue={selectedState}\n                    classes={classes}\n                    onSelect={getChangeHandler(\"state\")}\n                    prefix=\"state\"\n                  />\n                  <Selector\n                    values={districts}\n                    selectedValue={selectedDistrict}\n                    classes={classes}\n                    onSelect={getChangeHandler(\"district\")}\n                    prefix=\"district\"\n                  />\n                  <TextField\n                    id=\"outlined-basic\"\n                    label=\"Age\"\n                    variant=\"outlined\"\n                    width=\"md\"\n                    value={age}\n                    onChange={getChangeHandler(\"age\")}\n                  />\n                </div>\n              )}\n              {selectedDistrict !== \"\" && age !== \"\" && (\n                <Results capacity={capacity} isLoading={isDataLoading} />\n              )}\n            </div>\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <DataTable slots={tableData} isLoading={isDataLoading} />\n          </Grid>\n        </Grid>\n      </div>\n      <Footer />\n    </>\n  );\n}\n\nexport default withRouter(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}