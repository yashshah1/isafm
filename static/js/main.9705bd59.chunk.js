(this.webpackJsonpisafm=this.webpackJsonpisafm||[]).push([[0],{637:function(e,t,n){},639:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(13),i=n.n(r),s=n(239),o=n(44),u=n.n(o),l=n(76),j=n(40),f=n(23),b=n(348),p=n(358),d=n(668),h=n(234),m=n(309),O=n(233),x=n(240),v=n(9),g=function(e){var t=e.values,n=e.selectedValue,a=e.onSelect,c=e.classes,r=e.prefix;return Object(v.jsxs)(O.a,{variant:"outlined",className:c.formControl,children:[Object(v.jsx)(h.a,{id:"".concat(r,"-input-label"),className:"input-label",children:r}),Object(v.jsx)(x.a,{labelId:"".concat(r,"-input-label"),id:"".concat(r,"-input-select"),value:n,onChange:a,label:r,autoWidth:!0,children:t.map((function(e){var t=e.id,n=e.name;return Object(v.jsx)(m.a,{value:t,children:n},"prefix-".concat(t))}))})]})},y=n(667),w=n(236),S=n(237),k=n.n(S),C=n(666),_=function(){return Object(v.jsx)("div",{className:"flex justify-center",children:Object(v.jsx)(C.a,{})})},L=function(e){var t=e.capacity,n=e.isLoading,c=Object(a.useState)(!1),r=Object(j.a)(c,2),i=r[0],s=r[1];return Object(v.jsxs)(v.Fragment,{children:[n?Object(v.jsx)(_,{}):Object(v.jsxs)("div",{className:"flex flex-column align-center",style:{marginBottom:"1rem",textAlign:"center"},children:[Object(v.jsxs)("h1",{align:"center",children:["There ",1===t?"is":"are"," ",t," ",1===t?"slot":"slots"," in the next 7 days!"," ",0===t?"\ud83d\ude14":"\ud83d\ude80"]}),Object(v.jsxs)("span",{style:{userSelect:"none"},children:["Want to check back again later?"," ",Object(v.jsx)("u",{onClick:function(){navigator.clipboard.writeText(window.location.href).then((function(){return s(!0)}),(function(){return alert("error copying")}))},style:{cursor:"pointer"},children:"Copy the URL!"})]})]}),Object(v.jsx)(y.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:i,autoHideDuration:2e3,onClose:function(){return s(!1)},message:"Copied to clipboard",action:Object(v.jsx)(w.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return s(!1)},children:Object(v.jsx)(k.a,{fontSize:"small"})})})]})},N=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h1",{align:"center",children:"Is a (vaccination) slot available for me?"}),Object(v.jsx)("h3",{align:"center",children:"For people who are too lazy to login"})]})},T=function(){return Object(v.jsx)("footer",{style:{bottom:"25px",fontSize:"1.2em",color:"grey",textAlign:"center",marginTop:"1.5rem"},children:Object(v.jsxs)("div",{className:"container",children:["By"," ",Object(v.jsx)("a",{href:"https://yashshah1.github.io",target:"_blank",rel:"noreferrer",children:"Yash Shah"})]})})},E=n(61),D={filter:!0,sort:!1,filterType:"dropdown"},z=Object(E.a)(Object(E.a)({},D),{},{filterType:"multiselect"}),A=[{name:"name",label:"Name",options:{filter:!1,sort:!0,sortThirdClickReset:!0}},{name:"date",label:"Date",options:Object(E.a)(Object(E.a)({},z),{},{sort:!0})},{name:"capacity",label:"Capacity",options:{filter:!1,sort:!0}},{name:"pincode",label:"Pin Code",options:z},{name:"vaccine",label:"Vaccine",options:D},{name:"block",label:"Block",options:{display:!1,filter:!0,filterType:"multiselect"}}],B=n(379),P=n.n(B),Y=function(e,t){if(e=e.toLowerCase().split(" "),t=t.toLowerCase().split(" "),e.length>t.length)return!1;for(var n=!0,a=0;a<e.length;a++){for(var c=!1,r=a;r<t.length;r++)if(t[r].startsWith(e[a])){c=!0;break}if(!c){n=!1;break}}return n},F={download:!1,print:!1,viewColumns:!1,selectableRows:"none",responsive:"standard",rowsPerPage:10,rowsPerPageOptions:[],customSearch:function(e,t){return Y(e,t[0])}},R=function(e){var t=e.columns,n=e.data,a=e.options,c=void 0===a?{}:a,r=e.isLoading;return c=Object(E.a)(Object(E.a)({},c),F),r?Object(v.jsx)(_,{}):Object(v.jsx)(P.a,{title:"Available Slots",columns:t,options:c,data:n})},V=function(e){var t=e.slots,n=e.isLoading;return Object(v.jsx)(R,{columns:A,data:t,isLoading:n})},W=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(e){return e.json()})).then((function(e){return e.states})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://cdn-api.co-vin.in/api/v2/admin/location/districts/".concat(t)).then((function(e){return e.json()})).then((function(e){return e.districts})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=n(381),J=n.n(M),G=n(382),H=n.n(G),U=J()(),q=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(+n<18)){e.next=2;break}return e.abrupt("return",[]);case 2:return a=U.format("DD-MM-YYYY"),c="".concat("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?","district_id=").concat(t,"&date=").concat(a),e.abrupt("return",fetch(c).then((function(e){return e.json()})).then((function(e){return e.centers})).then((function(e){return e.map((function(e){return e.sessions.map((function(t){return{block:e.block_name,fee:e.fee_type,name:e.name,pincode:e.pincode,capacity:t.available_capacity,min_age:t.min_age_limit,vaccine:t.vaccine,date:t.date}}))}))})).then((function(e){return H()(e)})).then((function(e){return e.filter((function(e){return e.capacity>0&&e.min_age<=+n})).map((function(e){return Object(E.a)(Object(E.a)({},e),{},{vaccine:e.vaccine||"N/A"})}))})).then((function(e){return e.sort((function(e,t){return t.capacity-e.capacity}))})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(e){var t={};return e.length<=1?{state:"21",district:"363",age:"21"}:(e.slice(1).split("&").forEach((function(e){if(0!==e.trim().length){var n=e.split("="),a=Object(j.a)(n,2),c=a[0],r=a[1];r.trim().length>0&&(t[c]=r)}})),t)},Q=Object(b.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},root:{flexGrow:1,marginLeft:"1rem",marginRight:"1rem"}}}));var X=Object(f.f)((function(){var e=Object(a.useState)(!0),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),i=Object(j.a)(r,2),s=i[0],o=i[1],b=Object(a.useState)(0),h=Object(j.a)(b,2),m=h[0],O=h[1],x=Object(a.useState)([]),y=Object(j.a)(x,2),w=y[0],S=y[1],k=Object(a.useState)([]),C=Object(j.a)(k,2),E=C[0],D=C[1],z=Object(a.useState)(""),A=Object(j.a)(z,2),B=A[0],P=A[1],Y=Object(a.useState)([]),F=Object(j.a)(Y,2),R=F[0],M=F[1],J=Object(a.useState)(""),G=Object(j.a)(J,2),H=G[0],U=G[1],X=Object(a.useState)(""),Z=Object(j.a)(X,2),$=Z[0],ee=Z[1],te=Q(),ne=Object(f.d)(),ae=Object(f.e)().search;Object(a.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:t=e.sent,D(t.map((function(e){return{id:e.state_id,name:e.state_name}}))),c(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){var e=K(ae),t=e.state,n=e.district,a=e.age;t&&P(t),n&&U(n),ee(a||"")}),[ae]),Object(a.useEffect)((function(){c(!0),function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(B);case 2:t=e.sent,M(t.map((function(e){return{id:e.district_id,name:e.district_name}}))),c(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[B]),Object(a.useEffect)((function(){H&&$&&(o(!0),q(H,$).then((function(e){S(e),O(function(e){return e.reduce((function(e,t){return e+t.capacity}),0)}(e)),o(!1)})))}),[H,$]);var ce=function(e){return function(t){var n=K(ae),a=t.target.value;"age"===e&&(a=a.replace(/\D/g,"")),n[e]=a.toString();var c,r=(c=n,Object.entries(c).map((function(e){var t=Object(j.a)(e,2),n=t[0],a=t[1];return a.trim().length>0?"".concat(n,"=").concat(a):""})).join("&"));ne.push("?".concat(r))}};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:te.root,children:[Object(v.jsx)(N,{}),Object(v.jsxs)(d.a,{container:!0,spacing:2,children:[Object(v.jsx)(d.a,{item:!0,xs:12,md:6,children:Object(v.jsxs)("div",{className:"flex flex-column",children:[Object(v.jsx)("br",{}),n?Object(v.jsx)(_,{}):Object(v.jsxs)("div",{className:"flex justify-center align-center flex-wrap gap-1",children:[Object(v.jsx)(g,{values:E,selectedValue:B,classes:te,onSelect:ce("state"),prefix:"state"}),Object(v.jsx)(g,{values:R,selectedValue:H,classes:te,onSelect:ce("district"),prefix:"district"}),Object(v.jsx)(p.a,{id:"outlined-basic",label:"Age",variant:"outlined",width:"md",value:$,onChange:ce("age")})]}),""!==H&&""!==$&&Object(v.jsx)(L,{capacity:m,isLoading:s})]})}),Object(v.jsx)(d.a,{item:!0,xs:12,md:6,children:Object(v.jsx)(V,{slots:w,isLoading:s})})]})]}),Object(v.jsx)(T,{})]})}));n(637);i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(s.a,{children:Object(v.jsx)(X,{})})}),document.getElementById("root"))}},[[639,1,2]]]);
//# sourceMappingURL=main.9705bd59.chunk.js.map